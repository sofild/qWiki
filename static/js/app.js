webpackJsonp([1],{"+skl":function(t,e){},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n("7+uW"),o={name:"App",components:{},data:function(){return{}},computed:{data:function(){var t=window.MENU;return this.formatMenu(t,"")}},methods:{formatMenu:function(t,e){var n=this,a=[];for(var o in t){var r={};isNaN(o)?(e=e+"/"+o,r.title=o,r.expand=!0,r.render=function(t,e){e.root,e.node;var n=e.data;return t("span",{style:{display:"inline-block",width:"100%"}},[t("span",[t("Icon",{props:{type:"ios-folder-outline"},style:{marginRight:"8px"}}),t("span",n.title)])])},r.children=this.formatMenu(t[o],e),a.push(r)):function(){var s=e+"/"+t[o];r.title=n.formatTitle(t[o]),r.render=function(t,e){e.root,e.node;var a=e.data;return t("span",{style:{display:"inline-block",width:"100%"}},[t("span",[t("Icon",{props:{type:"ios-paper-outline"},style:{marginRight:"8px"}}),t("Button",{props:{type:"text"},on:{click:function(){n.goto(s)}}},a.title)])])},a.push(r)}()}return a},formatTitle:function(t){var e=t.split("_");return t.replace(e[0]+"_","").replace(".qwk","")},goto:function(t){window.location.href="index.php?to="+encodeURIComponent(t)}}},r={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"layout"},[n("Layout",[n("Header",[n("Menu",{attrs:{mode:"horizontal",theme:"dark","active-name":"1"}},[n("div",{staticClass:"layout-logo"}),t._v(" "),n("div",{staticClass:"layout-nav"},[n("MenuItem",{attrs:{name:"1"}},[n("router-link",{attrs:{to:"/add"}},[n("Icon",{attrs:{type:"ios-navigate"}}),t._v("\n                        新增\n                      ")],1)],1)],1)])],1),t._v(" "),n("Layout",[n("Sider",{style:{background:"#fff"},attrs:{"hide-trigger":""}},[n("Tree",{attrs:{data:t.data,render:t.renderContent}})],1),t._v(" "),n("Layout",{style:{padding:"0 24px 24px"}},[n("Breadcrumb",{style:{margin:"24px 0"}},[n("BreadcrumbItem",[t._v("Home")]),t._v(" "),n("BreadcrumbItem",[t._v("Components")]),t._v(" "),n("BreadcrumbItem",[t._v("Layout")])],1),t._v(" "),n("Content",{style:{padding:"24px",minHeight:"280px",background:"#fff"}},[n("router-view")],1)],1)],1)],1)],1)},staticRenderFns:[]};var s=n("VU/8")(o,r,!1,function(t){n("l+kn")},"data-v-0ae75ec6",null).exports,i=n("/ocq"),l={name:"Index",data:function(){return{html:window.HTML,attachments:window.ATTACHMENTS}}},d={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{domProps:{innerHTML:t._s(t.html)}}),t._v(" "),n("div",[n("ul",t._l(t.attachments,function(e,a){return n("li",[n("a",{attrs:{href:"attachments/"+e.url}},[t._v(t._s(e.name))])])}))])])},staticRenderFns:[]},c=n("VU/8")(l,d,!1,null,null,null).exports,p=n("mvHQ"),u=n.n(p),m=n("OS1Z"),h=(n("pw1w"),n("7t+N")),f=n.n(h),v={name:"Add",components:{mavonEditor:m.mavonEditor},data:function(){return{tag:0,path:"",title:"",attachments:[],default_files:[],html:""}},methods:{$imgAdd:function(t,e){var n=new FormData;n.append("image",e),axios({url:"upload.php",method:"post",data:n,headers:{"Content-Type":"multipart/form-data"}}).then(function(e){$vm.$img2Url(t,e)})},successHandle:function(t,e,n){this.attachments.push(t.file),t.err>0&&this.$Message.error(t.msg),console.log(this.attachments)},errHandle:function(t,e,n){this.$Message.error(t)},removeFile:function(t,e){var n=-1;for(var a in e)e[a].name===t.name&&(n=a);console.log(n,t,e),-1!==n&&this.attachments.splice(n,1),console.log(this.attachments)},saveHtml:function(t){var e=m.markdownIt.render(t);f.a.ajax({url:"save.php",method:"post",type:"json",data:{path:this.path,title:this.title,content:e,attachments:u()(this.attachments)},success:function(t){0===t.err?(this.$Message.success(t.msg),window.location.href="index.php?to="+t.to):this.$Message.error(t.msg)}})}}},g={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"editor"}},[n("div",{staticClass:"mt15"},[n("Row",[n("Col",{attrs:{span:"8"}},[n("Input",{staticStyle:{width:"100%",height:"50"},attrs:{placeholder:"path"},model:{value:t.path,callback:function(e){t.path=e},expression:"path"}})],1),t._v(" "),n("Col",{attrs:{span:"2"}}),t._v(" "),n("Col",{attrs:{span:"14"}},[n("Input",{staticStyle:{width:"100%",height:"50","margin-left":"20px"},attrs:{placeholder:"title"},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}})],1)],1)],1),t._v(" "),n("div",{staticClass:"mt15"},[n("Upload",{attrs:{multiple:"false",type:"drag","on-error":t.errHandle,"on-success":t.successHandle,"on-remove":t.removeFile,"default-file-list":t.default_files,action:"upload.php"}},[n("div",{staticStyle:{padding:"20px 0"}},[n("Icon",{staticStyle:{color:"#3399ff"},attrs:{type:"ios-cloud-upload",size:"52"}}),t._v(" "),n("p",[t._v("Click or drag attachments here to upload")])],1)])],1),t._v(" "),n("div",{staticClass:"mt15"},[n("mavon-editor",{ref:"md",staticStyle:{height:"100%"},on:{imgAdd:t.$imgAdd,save:t.saveHtml}})],1)])},staticRenderFns:[]};var _=n("VU/8")(v,g,!1,function(t){n("vzKB")},"data-v-6419702f",null).exports;a.default.use(i.a);var y=new i.a({routes:[{path:"/",name:"Index",component:c},{path:"/add",name:"Add",component:_}]}),w=n("BTaQ"),x=n.n(w);n("+skl");a.default.config.productionTip=!1,a.default.use(x.a),new a.default({el:"#app",router:y,components:{App:s},template:"<App/>"})},"l+kn":function(t,e){},pw1w:function(t,e){},vzKB:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.js.map