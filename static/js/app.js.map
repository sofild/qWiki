{"version":3,"sources":["webpack:///src/App.vue","webpack:///./src/App.vue?290b","webpack:///./src/App.vue","webpack:///src/components/Index.vue","webpack:///./src/components/Index.vue?ab01","webpack:///./src/components/Index.vue","webpack:///src/components/Add.vue","webpack:///./src/components/Add.vue?bbe0","webpack:///./src/components/Add.vue","webpack:///./src/router/index.js","webpack:///./src/main.js"],"names":["App","name","components","data","path","this","$store","state","path_curent","computed","menus","window","MENU","formatMenu","mounted","methods","pmenu","_this","k","obj","isNaN","title","expand","render","h","_ref2","root","node","style","display","width","props","type","marginRight","fontSize","on","click","getParent","children","push","formatTitle","_ref","goto","names","split","replace","location","href","encodeURIComponent","$route","path_selected","edit","_this2","jquery_default","a","ajax","url","method","file","CURPATH","action","success","err","$router","$Message","error","msg","selectortype_template_index_0_src_App","_vm","_h","$createElement","_c","_self","staticClass","attrs","mode","theme","active-name","_v","to","background","hide-trigger","renderContent","padding","margin","_l","item","index","_s","length","_e","minHeight","staticRenderFns","src_App","__webpack_require__","normalizeComponent","ssrContext","Index","attachments","ATTACHMENTS","html","content","HTML","mavon_editor","nl2br","str","is_xhtml","components_Index","domProps","innerHTML","target","src_components_Index","Index_normalizeComponent","Add","mavonEditor","tag","default_files","PATH","slice","join","TITLE","formatAttach","$imgAdd","pos","$file","formdata","FormData","append","axios_default","headers","Content-Type","then","info","$refs","md","$img2Url","successHandle","response","fileList","relname","errHandle","removeFile","i","splice","saveHtml","stringify_default","unformatAttach","attachs","dat","components_Add","id","span","staticStyle","height","placeholder","model","value","callback","$$v","$set","expression","margin-left","multiple","on-error","on-success","on-remove","default-file-list","color","size","ref","imgAdd","save","src_components_Add","Add_normalizeComponent","vue_esm","use","vue_router_esm","router","routes","component","config","productionTip","iview_default","vuex_esm","store","Store","mutations","el","template"],"mappings":"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","file":"static/js/app.js","sourcesContent":["<style scoped>\r\n.layout{\r\n    border: 1px solid #d7dde4;\r\n    background: #f5f7f9;\r\n    position: relative;\r\n    border-radius: 4px;\r\n    overflow: hidden;\r\n}\r\n.layout-logo{\r\n    width: 100px;\r\n    height: 30px;\r\n    background: #5b6270;\r\n    border-radius: 3px;\r\n    float: left;\r\n    position: relative;\r\n    top: 15px;\r\n    left: 10px;\r\n    text-align: center;\r\n    line-height: 30px;\r\n    vertical-align: middle;\r\n    color: #ccc;\r\n}\r\n.layout-nav{\r\n    width: 100px;\r\n    margin: 0 auto;\r\n    margin-right: 20px;\r\n}\r\n.layout-nav a{\r\n  color: #ccc;\r\n}\r\n</style>\r\n<template>\r\n    <div class=\"layout\">\r\n        <Layout>\r\n            <Header>\r\n                <Menu mode=\"horizontal\" theme=\"dark\" active-name=\"1\">\r\n                    <div class=\"layout-logo\">qWiKi</div>\r\n                    <div class=\"layout-nav\">\r\n                        <MenuItem name=\"1\">\r\n                          <router-link to=\"/add\">\r\n                            <Icon type=\"edit\"></Icon>\r\n                            写文档\r\n                          </router-link>\r\n                        </MenuItem>\r\n                    </div>\r\n                </Menu>\r\n            </Header>\r\n            <Layout>\r\n                <Sider hide-trigger :style=\"{background: '#fff'}\">\r\n                    <Tree :data=\"data\" :render=\"renderContent\"></Tree>\r\n                </Sider>\r\n                <Layout :style=\"{padding: '0 24px 24px'}\">\r\n                    <Breadcrumb :style=\"{margin: '24px 0'}\">\r\n                        <BreadcrumbItem v-for=\"(item,index) in $store.state.path_curent\">\r\n                          {{ item }}\r\n                          <span v-if=\"index===($store.state.path_curent.length-1) && $route.path!=='/add' && $route.path!=='/edit'\"><a href=\"javascript:void(0);\" @click=\"edit\"><Icon type=\"compose\"></Icon></a></span>\r\n                        </BreadcrumbItem>\r\n                    </Breadcrumb>\r\n                    <Content :style=\"{padding: '24px', minHeight: '280px', background: '#fff'}\">\r\n                        <router-view></router-view>\r\n                    </Content>\r\n                </Layout>\r\n            </Layout>\r\n        </Layout>\r\n    </div>\r\n</template>\r\n<script>\r\n  import $ from 'jquery'\r\n  export default {\r\n    name: 'App',\r\n    components: {\r\n      \r\n    },\r\n    data () {\r\n        return {\r\n            path: this.$store.state.path_curent\r\n        }\r\n    },\r\n    computed: {\r\n      data: function() {\r\n        let datas = []\r\n        let menus = window.MENU\r\n        return this.formatMenu(menus, '')\r\n      }\r\n    },\r\n    mounted() {\r\n      \r\n    },\r\n    methods: {\r\n      formatMenu(menus, pmenu){\r\n        let data = []\r\n        for(let k in menus){\r\n          let obj = {}\r\n          if(!isNaN(k)){\r\n            let path = pmenu + '/' + menus[k]\r\n            obj.title = this.formatTitle(menus[k])\r\n            obj.render = (h, { root, node, data }) => {\r\n                            return h('span', {\r\n                              style: {\r\n                                display: 'inline-block',\r\n                                width: '100%'\r\n                              }\r\n                            }, [\r\n                              h('span', [\r\n                                h('Icon', {\r\n                                  props: {\r\n                                    type: 'ios-paper-outline'\r\n                                  },\r\n                                  style: {\r\n                                    marginRight: '8px'\r\n                                  }\r\n                                }),\r\n                                h('a', {\r\n                                  props: {\r\n                                      type: 'text'\r\n                                  },\r\n                                  style: {\r\n                                    fontSize: '14px'\r\n                                  },\r\n                                  on: {\r\n                                      click: () => { this.goto(path) }\r\n                                  }\r\n                                }, data.title)\r\n                              ]),\r\n                            ]);\r\n                          } \r\n            data.push(obj)\r\n          }\r\n          else{\r\n            pmenu = pmenu + '/' + k\r\n            obj.title = k\r\n            obj.expand = true\r\n            obj.render = (h, { root, node, data }) => {\r\n                return h('span', {\r\n                  style: {\r\n                    display: 'inline-block',\r\n                    width: '100%'\r\n                  }\r\n                }, [\r\n                  h('span', [\r\n                    h('Icon', {\r\n                      props: {\r\n                        type: 'ios-folder-outline'\r\n                      },\r\n                      style: {\r\n                        marginRight: '8px'\r\n                      }\r\n                    }),\r\n                    h('a', {\r\n                      props: {\r\n                          type: 'text'\r\n                      },\r\n                      style: {\r\n                        fontSize: '14px'\r\n                      },\r\n                      on: {\r\n                          click: () => { this.getParent(pmenu) }\r\n                      }\r\n                    }, data.title)\r\n                  ]),\r\n                ]);\r\n              }\r\n            obj.children = this.formatMenu(menus[k], pmenu)\r\n            data.push(obj)\r\n          }\r\n        }\r\n        return data\r\n      },\r\n      formatTitle(name) {\r\n        let names = name.split('_')\r\n        let name2 = name.replace(names[0]+'_', '')\r\n        let name3 = name2.replace('.qwk', '')\r\n        return name3\r\n      },\r\n      goto(path) {\r\n        window.location.href='index.php?to='+encodeURIComponent(path)\r\n      },\r\n      getParent(path) {\r\n        if(this.$route.path==='/add'){\r\n          this.$store.state.path_selected = path\r\n          return\r\n        }\r\n      },\r\n      edit(){\r\n        $.ajax({\r\n          url:'save.php',\r\n          method: 'post',\r\n          type: 'json',\r\n          data: {file: window.CURPATH, action: 'check'},\r\n          success: (data) => {\r\n            if(data.err == 0){\r\n              this.$router.push({ path: '/edit' })\r\n            }\r\n            else{\r\n              this.$Message.error(data.msg)\r\n            }\r\n          }\r\n        })\r\n      }\r\n    }\r\n\r\n  }\r\n</script>\n\n\n// WEBPACK FOOTER //\n// src/App.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"layout\"},[_c('Layout',[_c('Header',[_c('Menu',{attrs:{\"mode\":\"horizontal\",\"theme\":\"dark\",\"active-name\":\"1\"}},[_c('div',{staticClass:\"layout-logo\"},[_vm._v(\"qWiKi\")]),_vm._v(\" \"),_c('div',{staticClass:\"layout-nav\"},[_c('MenuItem',{attrs:{\"name\":\"1\"}},[_c('router-link',{attrs:{\"to\":\"/add\"}},[_c('Icon',{attrs:{\"type\":\"edit\"}}),_vm._v(\"\\n                        写文档\\n                      \")],1)],1)],1)])],1),_vm._v(\" \"),_c('Layout',[_c('Sider',{style:({background: '#fff'}),attrs:{\"hide-trigger\":\"\"}},[_c('Tree',{attrs:{\"data\":_vm.data,\"render\":_vm.renderContent}})],1),_vm._v(\" \"),_c('Layout',{style:({padding: '0 24px 24px'})},[_c('Breadcrumb',{style:({margin: '24px 0'})},_vm._l((_vm.$store.state.path_curent),function(item,index){return _c('BreadcrumbItem',[_vm._v(\"\\n                      \"+_vm._s(item)+\"\\n                      \"),(index===(_vm.$store.state.path_curent.length-1) && _vm.$route.path!=='/add' && _vm.$route.path!=='/edit')?_c('span',[_c('a',{attrs:{\"href\":\"javascript:void(0);\"},on:{\"click\":_vm.edit}},[_c('Icon',{attrs:{\"type\":\"compose\"}})],1)]):_vm._e()])})),_vm._v(\" \"),_c('Content',{style:({padding: '24px', minHeight: '280px', background: '#fff'})},[_c('router-view')],1)],1)],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-09fb876c\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/App.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-09fb876c\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../node_modules/vue-loader/lib/selector?type=styles&index=0!./App.vue\")\n}\nvar normalizeComponent = require(\"!../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\nimport __vue_script__ from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\n/* template */\nimport __vue_template__ from \"!!../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-09fb876c\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../node_modules/vue-loader/lib/selector?type=template&index=0!./App.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-09fb876c\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/App.vue\n// module id = null\n// module chunks = ","<style scoped>\r\n.attachs {\r\n  margin-top:20px;\r\n}\r\n.attachs ul li {\r\n  list-style-type:none;\r\n}\r\n</style>\r\n<template>\r\n  <div>\r\n    <div v-html=\"html\"></div>  \r\n    <div class=\"attachs\" v-if=\"attachments.length > 0\">\r\n        <div>附件</div>\r\n        <ul>\r\n          <li v-for=\"(item, index) in attachments\">\r\n            <a :href=\"'attachments/'+item.url\" target=\"_blank\"><Icon type=\"android-attach\"></Icon> {{ item.name }}</a>\r\n          </li>\r\n        </ul>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { markdownIt as md } from 'mavon-editor'\r\nexport default {\r\n  name: 'Index',\r\n  data () {\r\n    return {\r\n      attachments: window.ATTACHMENTS\r\n    }\r\n  },\r\n  computed: {\r\n    html: function() {\r\n      let content = window.HTML.html\r\n      let html = md.render(content)\r\n      return this.nl2br(html)\r\n    }\r\n  },\r\n  methods: {\r\n    nl2br (str, is_xhtml) {\r\n      var breakTag = (is_xhtml || typeof is_xhtml === 'undefined') ? '<br />' : '<br>';    \r\n      return (str + '').replace(/([^>\\r\\n]?)(\\r\\n|\\n\\r|\\r|\\n)/g, '$1'+ breakTag +'$2');\r\n    }\r\n  }\r\n}\r\n</script>\n\n\n// WEBPACK FOOTER //\n// src/components/Index.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{domProps:{\"innerHTML\":_vm._s(_vm.html)}}),_vm._v(\" \"),(_vm.attachments.length > 0)?_c('div',{staticClass:\"attachs\"},[_c('div',[_vm._v(\"附件\")]),_vm._v(\" \"),_c('ul',_vm._l((_vm.attachments),function(item,index){return _c('li',[_c('a',{attrs:{\"href\":'attachments/'+item.url,\"target\":\"_blank\"}},[_c('Icon',{attrs:{\"type\":\"android-attach\"}}),_vm._v(\" \"+_vm._s(item.name))],1)])}))]):_vm._e()])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-3f8ea3b2\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/Index.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-3f8ea3b2\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Index.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Index.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Index.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-3f8ea3b2\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Index.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-3f8ea3b2\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Index.vue\n// module id = null\n// module chunks = ","<style scoped>\r\n\t.mt15{\r\n\t\tmargin-top: 15px;\r\n\t}\r\n\t.ivu-input{\r\n\t\theight: 50px;\r\n\t}\r\n</style>\r\n<template>\r\n\t<div id=\"editor\">\r\n\t\t<div class=\"mt15\">\r\n\t\t\t<Row>\r\n\t\t\t\t<Col span=\"8\">\r\n\t\t\t\t\t<Input v-model=\"$store.state.path_selected\" placeholder=\"path\" style=\"width: 100%; height:50;\"></Input>\r\n\t\t\t\t</Col>\r\n\t\t\t\t<Col span=\"2\"></Col>\r\n\t\t\t\t<Col span=\"14\">\r\n\t\t\t\t\t<Input v-model=\"title\" placeholder=\"title\" style=\"width: 100%; height:50; margin-left:20px;\"></Input>\r\n\t\t\t\t</Col>\r\n\t\t\t</Row>\r\n\t\t</div>\r\n\t\t<div class=\"mt15\">\r\n\t      <Upload\r\n\t\t        multiple=\"false\"\r\n\t\t        type=\"drag\"\r\n\t\t        :on-error=\"errHandle\"\r\n\t\t        :on-success=\"successHandle\"\r\n\t\t        :on-remove=\"removeFile\"\r\n\t\t        :default-file-list=\"default_files\"\r\n\t\t        action=\"upload.php\">\r\n\t\t        <div style=\"padding: 20px 0\">\r\n\t\t            <Icon type=\"ios-cloud-upload\" size=\"52\" style=\"color: #3399ff\"></Icon>\r\n\t\t            <p>Click or drag attachments here to upload</p>\r\n\t\t        </div>\r\n\t\t    </Upload>\r\n\t    </div>\r\n\t\t<div class=\"mt15\">\r\n        \t<mavon-editor style=\"height: 100%\" ref=md @imgAdd=\"$imgAdd\" @save=\"saveHtml\" :value=\"html\"></mavon-editor>\r\n        </div>\r\n    </div>\r\n</template>\r\n<script>\r\nimport { mavonEditor } from 'mavon-editor'\r\nimport { markdownIt as md } from 'mavon-editor'\r\nimport 'mavon-editor/dist/css/index.css'\r\nimport $ from 'jquery'\r\nimport axios from 'axios'\r\nexport default {\r\n  name: 'Add',\r\n  components: {\r\n    mavonEditor\r\n  },\r\n  data () {\r\n    return {\r\n      tag: 0,\r\n      title: '',\r\n      attachments: [],\r\n      default_files: [],\r\n      html: '',\r\n      edit: 0\r\n    }\r\n  },\r\n  mounted () {\r\n    if(this.$route.path==='/add'){\r\n      this.$store.state.path_curent = [\"\", \"新增文档\"]\r\n      this.$store.state.path_selected = '/'\r\n      this.edit = 0\r\n    }\r\n    else{\r\n      this.$store.state.path_curent = window.PATH\r\n      let path_selected = window.PATH.slice(0, -1).join('/')\r\n      this.$store.state.path_selected = (path_selected==='' ? '/' : '') + path_selected \r\n      this.title = window.TITLE\r\n      this.default_files = window.ATTACHMENTS\r\n      this.attachments = this.formatAttach(window.ATTACHMENTS)\r\n      this.html = window.HTML.html\r\n      this.edit = 1\r\n    }\r\n  },\r\n  methods: {\r\n    $imgAdd(pos, $file) {\r\n      var formdata = new FormData();\r\n      formdata.append('image', $file);\r\n      formdata.append('type', 'image');\r\n      axios({\r\n        url: 'upload.php',\r\n        method: 'post',\r\n        data: formdata,\r\n        headers: { 'Content-Type': 'multipart/form-data' },\r\n      }).then((info) => {\r\n        let data = info.data\r\n        if(data.err == 0){\r\n          this.$refs.md.$img2Url(pos, 'images/'+ data.file.url);\r\n        }\r\n        else{\r\n          this.$Message.error(data.msg);\r\n        }\r\n      })\r\n    },\r\n  \tsuccessHandle(response, file, fileList){\r\n      if(response.file){\r\n        response.file.relname = file.name\r\n      }\r\n  \t\tthis.attachments.push(response.file)\r\n  \t\tif(response[\"err\"] > 0){\r\n  \t\t\tthis.$Message.error(response.msg)\r\n  \t\t}\r\n  \t},\r\n    errHandle(err, file, fileList) {\r\n    \tthis.$Message.error(err);\r\n    },\r\n    removeFile(file, fileList) {\r\n    \tlet index = -1\r\n    \tfor(let i in this.attachments){\r\n    \t\tif(this.attachments[i]['relname']===file['name']){\r\n    \t\t\tindex = i\r\n    \t\t}\r\n    \t}\r\n    \tif(index!==-1){\r\n    \t\tthis.attachments.splice(index, 1)\r\n    \t}\r\n    },\r\n    saveHtml(data) {\r\n      if(this.title==''){\r\n        this.$Message.error('请填写标题');\r\n        return false;\r\n      }\r\n    \t$.ajax({\r\n    \t\turl:'save.php',\r\n    \t\tmethod: 'post',\r\n    \t\ttype: 'json',\r\n    \t\tdata: {path: this.$store.state.path_selected, title: this.title, content: data, attachments: JSON.stringify(this.unformatAttach(this.attachments)), file: window.CURPATH, edit: this.edit},\r\n    \t\tsuccess: (data) => {\r\n    \t\t\tif(data.err == 0){\r\n    \t\t\t\tthis.$Message.success(data.msg)\r\n    \t\t\t\twindow.location.href='index.php?to='+data.to\r\n    \t\t\t}\r\n    \t\t\telse{\r\n    \t\t\t\tthis.$Message.error(data.msg);\r\n    \t\t\t}\r\n    \t\t}\r\n    \t})\r\n    },\r\n    formatAttach(attachs) {\r\n      for(let i=0; i<attachs.length; i++){\r\n        attachs[i]['relname'] = attachs[i]['name']\r\n      }\r\n      return attachs\r\n    },\r\n    unformatAttach(attachs){\r\n      let data = []\r\n      for(let i=0; i<attachs.length; i++){\r\n        let dat = {}\r\n        dat.name = attachs[i]['name']\r\n        dat.url = attachs[i]['url']\r\n        data.push(dat)\r\n      }\r\n      return data\r\n    }\r\n\r\n  }\r\n}\r\n</script>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/Add.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"editor\"}},[_c('div',{staticClass:\"mt15\"},[_c('Row',[_c('Col',{attrs:{\"span\":\"8\"}},[_c('Input',{staticStyle:{\"width\":\"100%\",\"height\":\"50\"},attrs:{\"placeholder\":\"path\"},model:{value:(_vm.$store.state.path_selected),callback:function ($$v) {_vm.$set(_vm.$store.state, \"path_selected\", $$v)},expression:\"$store.state.path_selected\"}})],1),_vm._v(\" \"),_c('Col',{attrs:{\"span\":\"2\"}}),_vm._v(\" \"),_c('Col',{attrs:{\"span\":\"14\"}},[_c('Input',{staticStyle:{\"width\":\"100%\",\"height\":\"50\",\"margin-left\":\"20px\"},attrs:{\"placeholder\":\"title\"},model:{value:(_vm.title),callback:function ($$v) {_vm.title=$$v},expression:\"title\"}})],1)],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"mt15\"},[_c('Upload',{attrs:{\"multiple\":\"false\",\"type\":\"drag\",\"on-error\":_vm.errHandle,\"on-success\":_vm.successHandle,\"on-remove\":_vm.removeFile,\"default-file-list\":_vm.default_files,\"action\":\"upload.php\"}},[_c('div',{staticStyle:{\"padding\":\"20px 0\"}},[_c('Icon',{staticStyle:{\"color\":\"#3399ff\"},attrs:{\"type\":\"ios-cloud-upload\",\"size\":\"52\"}}),_vm._v(\" \"),_c('p',[_vm._v(\"Click or drag attachments here to upload\")])],1)])],1),_vm._v(\" \"),_c('div',{staticClass:\"mt15\"},[_c('mavon-editor',{ref:\"md\",staticStyle:{\"height\":\"100%\"},attrs:{\"value\":_vm.html},on:{\"imgAdd\":_vm.$imgAdd,\"save\":_vm.saveHtml}})],1)])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-0120e67a\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/Add.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-0120e67a\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Add.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Add.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Add.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-0120e67a\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Add.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-0120e67a\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Add.vue\n// module id = null\n// module chunks = ","import Vue from 'vue'\r\nimport Router from 'vue-router'\r\nimport Index from '@/components/Index'\r\nimport Add from '@/components/Add'\r\n\r\nVue.use(Router)\r\n\r\nexport default new Router({\r\n  routes: [\r\n  \t{\r\n      path: '/',\r\n      name: 'Index',\r\n      component: Index\r\n    },\r\n    {\r\n      path: '/add',\r\n      name: 'Add',\r\n      component: Add\r\n    },\r\n    {\r\n      path: '/edit',\r\n      name: 'Add',\r\n      component: Add\r\n    }\r\n  ]\r\n})\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/router/index.js","// The Vue build version to load with the `import` command\r\n// (runtime-only or standalone) has been set in webpack.base.conf with an alias.\r\nimport Vue from 'vue'\r\nimport App from './App'\r\nimport router from './router'\r\nimport iView from 'iview'\r\nimport 'iview/dist/styles/iview.css'\r\nimport Vuex from 'vuex'\r\n\r\nVue.config.productionTip = false\r\n\r\nVue.use(iView);\r\nVue.use(Vuex);\r\n\r\n\r\nconst store = new Vuex.Store({\r\n  state: {\r\n    path_selected: '/',\r\n    path_curent: window.PATH\r\n  },\r\n  mutations: {\r\n    \r\n  }\r\n})\r\n\r\n/* eslint-disable no-new */\r\nnew Vue({\r\n  el: '#app',\r\n  router,\r\n  store,\r\n  components: { App },\r\n  template: '<App/>'\r\n})\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js"],"sourceRoot":""}